<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Buyers</title>
    <!-- Rent up logo -->
    <link rel="shortcut icon" href="./images/RentUp logo.jpg" type="image/x-icon">

    <!-- Bootstrap 5 link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <!-- font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- css -->
    <link rel="stylesheet" href="./landingPage.css">

    <!-- google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400&display=swap" rel="stylesheet">

    <!-- Rentup database  -->
    <script src="./RentUpDB.js"></script>

    <!-- Bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>

<body onload="loadBuyer()">
    


    <!-- RentUp navbar -->

    <nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="./index.html" id="icon">
                <span class="text-success"><i class="bi bi-house"></i>RENT</span><span class="text-dark">UP</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll"
                aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarScroll">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                    <li class="nav-item">
                        <a class="nav-link active me-2" aria-current="page" href="./index.html" id="home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active me-2" aria-current="page" href="./For buyers.html" id="buy">Buy</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active me-2" aria-current="page" href="./For Rent.html" id="rent">Rent</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active me-2" aria-current="page" href="./For Commercial.html"
                            id="commercial">Commercial</a>
                    </li>

                    <form class="d-flex me-2">
                        <input class="form-control me-2" id="search" type="search"
                            placeholder="Enter Locality/Landmark/Projects" aria-label="Search">
                        <button class="btn btn-success" id="btnse" type="button"><i class="bi bi-search"></i></button>
                    </form>

                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="./register.html" target="_blank"
                            id="register">Register</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="./signup.html" id="signin">Sign Up</a>
                    </li>
                    <li class="nav-item">
                        <a href="./cart.html" type="button" class="btn btn-light position-relative"
                            data-bs-toggle="tooltip" data-bs-placement="bottom" title="Cart">
                            <i class="fa fa-heart" id="navcart" aria-hidden="true"></i>
                            <!-- <span
                                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="badge">
                                
                            </span> -->
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <br>

    <!-- Display cards -->
    <div class="container" id="contain">
        <h1 class="text-center mb-5">For Buyers</h1>

        <div class="row" id="display" style="display: flex; justify-content: space-around;">


        </div>
    </div>

    <!-- contact us section -->
    <section class="about bg-dark section-padding">
        <div class="container">
            <div class="footer">
                <div class="row">
                    <div class="col-12 col-md-6 col-lg-4 mb-4">
                        <div class="card-deck text-center bg-dark pb-2">
                            <div class="card-body text-dark">
                                <h3 class="card-title"><span class="text-success">RENT</span><span class="text-light">UP</span></h3><br>
                                <ul class="list-inline">
                                    <li class="list-inline-item" id="icons"><i class="bi bi-facebook" id="fb"></i></li>
                                    <li class="list-inline-item" id="icons"><i class="bi bi-instagram" id="ins"></i></li>
                                    <li class="list-inline-item" id="icons"><i class="bi bi-youtube" id="yt"></i></li>
                                    <li class="list-inline-item" id="icons"><i class="fa fa-twitter" id="tw" aria-hidden="true"></i></li>
                                </ul>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-12 col-md-6 col-lg-4 mb-4">
                        <div class="card-deck text-center bg-dark pb-2">
                            <div class="card-body text-light">
                                <h2 class="card-title">Quick Link</h2><br>
                                <ul class="list-unstyled">
                                    <li><h5>Home</h5></li>
                                    <li><h5>About</h5></li>
                                    <li><h5>Services</h5></li>
                                </ul>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-12 col-md-12 col-lg-4 mb-4">
                        <div class="card-deck text-center bg-dark pb-2">
                            <div class="card-body text-light">
                                <h2 class="card-title">Contact</h2><br>
                                <p><i class="bi bi-geo-alt-fill"></i> 7453 Mayflower Ave, Winder, GA 30768, Street NO.3A, Newyork.</p>
                                <p><i class="bi bi-envelope-fill"></i> RentUp@gmail.com</p>
                                <p><i class="bi bi-telephone-fill"></i> 9449 040 8585</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer page -->

    <footer class="bg-dark p-2 text-center">
        <div class="container">
            <p class="text-white">&#169;All reserved rights @RentUp</p>
        </div>
    </footer>


    <script>

        function loadBuyer() {
            let displayBuy = '';
            ForBuyers.forEach(display => {
                displayBuy +=
                    '<div class="card mb-4" id="card-" style="width: 18rem;">' +
                    '<div class="location" style = "display:none;">' + display.dataItem + '</div>' +
                    '<img src="' + display.imageUrl + '" class="card-img-top" id="img" onclick="DescriptionPage(' + display.proid + ')" style="height:200px; width:18rem" alt="...">' +
                    '<div class="card-body">' +
                    '<h3 class="card-title">' + display.title + '</h3>' +
                    '<p class="card-text">' + display.buy + '</p>' +
                    '<p class="card-text">' + display.buildUp + '</p>' +
                    '<p class="card-text">' + display.EMI + '</p>' +
                    '<a class="btn btn-success me-4" data-bs-toggle="modal" data-bs-target="#exampleModal">Get Owner Details</a><i class="fa fa-heart" id="cart-'+display.proid+'" onclick="cartPage(' + display.proid + ')" aria-hidden="true" style="font-size:35px"></i>' +
                    '<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">' +
                    '<div class="modal-dialog modal-dialog-centered">' +
                    '<div class="modal-content">' +
                    '<div class="modal-header">' +
                    '<h5 class="modal-title" id="exampleModalLabel">Enter Your Details here</h5>' +
                    '<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>' +
                    '</div>' +
                    '<div class="modal-body">' +
                    '<div class="form-floating mb-3">' +
                    '<input type="number" class="form-control" id="floatingInput" placeholder="name@example.com">' +
                    '<label for="floatingInput">Mobile Number</label>' +
                    '</div>' +
                    '<div class="form-floating mb-3">' +
                    '<input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">' +
                    '<label for="floatingInput">Email address</label>' +
                    '</div>' +
                    '</div>' +
                    '<div class="modal-footer">' +
                    '<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>' +
                    '<button type="button" class="btn btn-success">Get Details</button>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
                document.getElementById("display").innerHTML = displayBuy;

            });


            // Search bar filter

            const searchBox = document.getElementById("search");
            const btn = document.querySelector("#btnse");

            console.log(searchBox);


            btn.addEventListener('click', () => {
                const searchValue = searchBox.value.toLowerCase().trim();
                console.log(searchValue);

                // To Clear previous search results
                document.getElementById("display").innerHTML = '';

                // Filter and display matching cards
                const filteredCards = ForBuyers.filter((display) => {
                    return display.dataItem.toLowerCase().includes(searchValue);
                });
                console.log(filteredCards);  //return the object in an array


                if (filteredCards.length > 0) {
                    filteredCards.forEach((display) => {
                        const cardHtml =
                            '<div class="card mb-4" id="card-" style="width: 18rem;">' +
                            '<div class="location" style="display:none;">' + display.dataItem + '</div>' +
                            '<img src="' + display.imageUrl + '" class="card-img-top" id="img" onclick="DescriptionPage(' + display.proid + ')" style="height:200px; width:18rem" alt="...">' +
                            '<div class="card-body">' +
                            '<h3 class="card-title">' + display.title + '</h3>' +
                            '<p class="card-text">' + display.buy + '</p>' +
                            '<p class="card-text">' + display.buildUp + '</p>' +
                            '<p class="card-text">' + display.EMI + '</p>' +
                            '<a class="btn btn-success me-4" data-bs-toggle="modal" data-bs-target="#exampleModal">Get Owner Details</a><i class="fa fa-heart"  onclick="cartPage(' + display.proid + ')" aria-hidden="true" style="font-size:35px"></i>' +
                            '<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">' +
                            '<div class="modal-dialog modal-dialog-centered">' +
                            '<div class="modal-content">' +
                            '<div class="modal-header">' +
                            '<h5 class="modal-title" id="exampleModalLabel">Enter Your Details here</h5>' +
                            '<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>' +
                            '</div>' +
                            '<div class="modal-body">' +
                            '<div class="form-floating mb-3">' +
                            '<input type="number" class="form-control" id="floatingInput" placeholder="name@example.com">' +
                            '<label for="floatingInput">Mobile Number</label>' +
                            '</div>' +
                            '<div class="form-floating mb-3">' +
                            '<input type="email" class="form-control" id="floatingInput" placeholder="name@example.com">' +
                            '<label for="floatingInput">Email address</label>' +
                            '</div>' +
                            '</div>' +
                            '<div class="modal-footer">' +
                            '<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>' +
                            '<button type="button" class="btn btn-success">Get Details</button>' +
                            '</div>' +
                            '</div>' +
                            '</div>' +
                            '</div>' +
                            '</div>' +
                            '</div>';

                        document.getElementById("display").innerHTML += cardHtml;
                    });

                } else {
                    document.getElementById("display").innerHTML = '<div class="text-center mb-5 mt-5" style="font-size : 25px">No Result Found.</div>';
                }


            });


        }






        // Description Page
        function DescriptionPage(proid) {
            sessionStorage.setItem("proId", proid);
            window.location.href = "./Description.html";
        }



        // cart     
        function cartPage(proid) {

            var proids = {
                "proid": proid,
            };
            let cart = JSON.parse(localStorage.getItem("cart")) || [];

            let cartButton = document.getElementById(`cart-${proid}`);
            let heartIcon = cartButton.querySelector('.fa-heart');
            console.log(heartIcon);

            if(cart.some(item => item.proid === proid)){
                // if item already in cart , remove it
                cart = cart.filter(item => item.proid !== proid);
                cartButton.classList.remove('red-heart');
                alert("Removed from cart");
            }else{
                cart.push(proids);
                cartButton.classList.add('red-heart');
                alert("Added successfully");
            }

            localStorage.setItem("cart", JSON.stringify(cart));

            
        }


        //    show the current page
        const currentPage = window.location.href;

        const navigationLinks = document.querySelectorAll('.nav-item .nav-link');

        navigationLinks.forEach(link => {
            if (link.href === currentPage) {
                link.classList.add('add');
            }
        });

    </script>

</body>

</html>